<div data-section-id="{{ section.id }}" data-section-type="megamenu-section" class="megamenu-section hidden-lg-down">
  <div id="_desktop_top_menu" class="menu js-top-menu hidden-sm-down" role="navigation">
    <div class="desktop-menu-block expand-more hidden-sm-down">
      <h2 class="home-title hidden-lg-down">{{ 'general.category_title.title' | t }}</h2>
      <div class="wrapper">
        <div class="line-menu half start"></div>
        <div class="line-menu"></div>
        <div class="line-menu half end"></div>
      </div>
    </div>
  {% assign i = 1 %}
      <ul class="top-menu" id="top-menu">
        {% if section.blocks.size > 0 %}
          {% for block in section.blocks %}
            <li class="category">
              {% if block.settings.title != blank %}
                <span class="float-xs-right hidden-lg-up">
                     {% if block.settings.navbar != blank %}
                      <span data-target="#_n_child-one{{ i }}" data-toggle="collapse" class="navbar-toggler collapse-icons clearfix collapsed">
                        <i class="material-icons add">&#xE313;</i>
                        <i class="material-icons remove">&#xE316;</i>
                      </span>
                    {% endif %}
                </span>
                <a href="{{ block.settings.button_link }}" class="dropdown-item"> 
                  <h3 class="title">{{ block.settings.title | escape }}</h3>
                   {% if block.settings.blog_show_new %}
                      <span class="new"> {{ 'general.mainmenu.new' | t }}</span>
                    {% endif %}
                    {% if block.settings.blog_show_sale %}
                     <span class="sale">{{ 'general.mainmenu.sale' | t }}</span>
                    {% endif %}
                    {% if block.settings.blog_show_hot %}
                     <span class="hot">{{ 'general.mainmenu.hot' | t }}</span>
                    {% endif %}
                   
                  {% if block.settings.navbar != blank %}
                    <i class="material-icons add hidden-lg-down">&#xE315;</i>
                  {% endif %}
                </a>

              {% endif %}
              {% if block.settings.navbar != blank %}
                {% assign a = 0 %}
                  <div class="popover sub-menu js-sub-menu collapse" id="_n_child-one{{ i }}">
                    <ul class="top-menu mainmenu-dropdown">
                      {% if block.settings.navbar != blank %}
                        <li class="sub-category">
                          {%- assign navbar = block.settings.navbar -%}
                          {% if block.settings.navbar != blank %}
                              <span class="float-xs-right hidden-lg-up">
                                {% if linklists[navbar].links != blank %}
                                  <span data-target="#_n_grand-child-one{{ i }}" data-toggle="collapse" class="navbar-toggler collapse-icons clearfix collapsed">
                                    <i class="material-icons add">&#xE313;</i>
                                    <i class="material-icons remove">&#xE316;</i>
                                  </span>
                                {% endif %}
                              </span>
                                  <a href="{{ block.settings.button_link1 }}" class="dropdown-item dropdown-submenu">
                                      <h3 class="inner-title">{{ linklists[navbar].title  }}</h3>
                                  </a>
                            <div class="top-menu collapse" id="_n_grand-child-one{{ i }}">
                              <ul class="top-menu">
                                {% for link in linklists[navbar].links %}
                                <li class="category">
                                  <a href="{{ link.url }}" class="dropdown-item">{{ link.title }}</a>
                                </li>
                                {% endfor %}
                              </ul>
                            </div>
                            {% assign a = a | plus: 1 %}
                          {% endif %}
                        </li>
                      {% endif %}
                      {% if block.settings.navbar1 != blank %}
                        <li class="sub-category">
                          {%- assign navbar1 = block.settings.navbar1 -%}
                          {% if block.settings.navbar1 != blank %}
                              <span class="float-xs-right hidden-lg-up">
                                {% if linklists[navbar1].links != blank %}
                                  <span data-target="#_n_grand-child-two{{ i }}" data-toggle="collapse" class="navbar-toggler collapse-icons clearfix collapsed">
                                    <i class="material-icons add">&#xE313;</i>
                                    <i class="material-icons remove">&#xE316;</i>
                                  </span>
                                {% endif %}
                              </span>
                                <a href="{{ block.settings.button_link2 }}" class="dropdown-item dropdown-submenu">
                                    <h3 class="inner-title">{{ linklists[navbar1].title  }}</h3>
                                </a>
                            <div class="top-menu collapse" id="_n_grand-child-two{{ i }}">
                              <ul class="top-menu">
                                {% for link in linklists[navbar1].links %}
                                <li class="category">
                                  <a href="{{ link.url }}" class="dropdown-item">{{ link.title }}</a>
                                </li>
                                {% endfor %}
                              </ul>
                            </div>
                            {% assign a = a | plus: 1 %}
                          {% endif %}
                        </li>
                      {% endif %}
                      {% if block.settings.navbar2 != blank %}
                        <li class="sub-category">
                          {%- assign navbar2 = block.settings.navbar2 -%}
                          {% if block.settings.navbar2 != blank %}
                              <span class="float-xs-right hidden-lg-up">
                                 {% if linklists[navbar2].links != blank %}
                                  <span data-target="#_n_grand-child-three{{ i }}" data-toggle="collapse" class="navbar-toggler collapse-icons clearfix collapsed">
                                    <i class="material-icons add">&#xE313;</i>
                                    <i class="material-icons remove">&#xE316;</i>
                                  </span>
                                 {% endif %}
                              </span>
                                <a href="{{ block.settings.button_link3 }}" class="dropdown-item dropdown-submenu">
                                    <h3 class="inner-title">{{ linklists[navbar2].title  }}</h3>
                                </a>
                            <div class="top-menu collapse" id="_n_grand-child-three{{ i }}">
                              <ul class="top-menu">
                                {% for link in linklists[navbar2].links %}
                                <li class="category">
                                  <a href="{{ link.url }}" class="dropdown-item">{{ link.title }}</a>
                                </li>
                                {% endfor %}
                              </ul>
                            </div>
                            {% assign a = a | plus: 1 %}
                          {% endif %}
                        </li>
                      {% endif %}
                      {% if block.settings.blog_show_collection %}
                       <li class="sub-category product_container hidden-lg-down">
                        {% if block.settings.collection-title != blank %}
                          <a href="{{ block.settings.button_link5 }}" class="dropdown-item dropdown-submenu">
                            <h3 class="inner-title">{{ block.settings.collection-title | escape }}</h3>
                          </a>
                        {% endif %}
                        {% if block.settings.product != blank %}
                          {%- assign product = all_products[block.settings.product] -%}
                           <div class="grid__item grid__item--{{section.id}}">
                                {% include 'menu-productcard', max_height: max_height %}
                            </div>
                        {% else %}
                            <div class="grid__item .grid__item--{{block.id}} {{ grid_item_width }}">
                              <div class="grid-view-item">
                                <a href="#" class="grid-view-item__link">
                                  <div class="grid-view-item__image">
                                    {% capture current %}{% cycle 1, 2, 3, 4, 5, 6 %}{% endcapture %}
                                    {{ 'product-' | append: current | placeholder_svg_tag: 'placeholder-svg' }}
                                  </div>
                                  <div class="h4 grid-view-item__title">{{ 'homepage.onboarding.product_title' | t }}</div>
                                  <div class="grid-view-item__meta">
                                    {% include 'product-price' %}
                                  </div>
                                </a>
                              </div>
                            </div>
                        {% endif %}
                      </li>
                      {% endif %}
                  </ul>
                    {% if block.settings.image1 != blank %}    
                      <div class="img-container">
                        <div class="{% if block.settings.image2 != blank %}col-xs-6{% else%}col-xs-12{% endif %} imagecontainer1">
                         {% if block.settings.bannerlink1 != blank %}
                            <a href="{{ block.settings.bannerlink1 }}" class="link">
                          {% endif %}
                            {% if block.settings.image1 != blank %}
                            <img 
                                 class="feature-row__image lazyload"
                                 src="{{ block.settings.image1 | img_url: '600x150' }}"
                                 data-widths="[180, 360, 540, 720, 900, 1080, 1296, 1512, 1728, 2048]"
                                 data-aspectratio="{{ block.settings.image1.aspect_ratio }}"
                                 data-sizes="auto"
                                 alt="{{ block.settings.image1.alt | escape }}">
                            {% endif %}
                            {% if block.settings.bannerlink1 != blank %}
                          </a>
                       {% endif %}
                        </div>
                         <div class="col-xs-6 imagecontainer2">
                         {% if block.settings.bannerlink2 != blank %}
                            <a href="{{ block.settings.bannerlink2 }}" class="link">
                          {% endif %}
                           {% if block.settings.image2 != blank %}
                          <img 
                               class="feature-row__image lazyload"
                               src="{{ block.settings.image2 | img_url: '600x150' }}"
                               data-widths="[180, 360, 540, 720, 900, 1080, 1296, 1512, 1728, 2048]"
                               data-aspectratio="{{ block.settings.image2.aspect_ratio }}"
                               data-sizes="auto"
                               alt="{{ block.settings.image2.alt | escape }}">
                           {% endif %}
                            {% if block.settings.bannerlink2 != blank %}
                          </a>
                       {% endif %}
                        </div>
                      </div>
                    {% endif %}
                  </div>
              {% endif %}
              {% assign i = i | plus: 1 %}
            </li>
          {% endfor %}
        {% endif %}
      </ul>
  </div>
</div>


{% schema %}
  {
    "name": "Mega Menu",
    "settings": [
      
    ],

  "blocks": [
        {
          "type": "text_block",
            "name": "Column",
            "settings": [
        {
            "type": "text",
            "id": "title",
            "label": "Top Heading"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Top Heading Link"
        },
        {
          "type": "checkbox",
          "id": "blog_show_new",
          "label": "Show New Tag",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "blog_show_sale",
          "label": "Show Sale Tag",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "blog_show_hot",
          "label": "Show Hot Tag",
          "default": false
        },
        {
          "type": "link_list",
          "id": "navbar",
          "label": "Column-1 Collection"
        },
        {
          "type": "url",
          "id": "button_link1",
          "label": "Column-1 Button Link"
        },
        {
            "type": "link_list",
            "id": "navbar1",
            "label": "column-2 Collection"
        },
        {
            "type": "url",
            "id": "button_link2",
            "label": "Column-2 Button Link"
        },
        {
              "type": "link_list",
              "id": "navbar2",
              "label": "Column3 Collection"
        },
        {
            "type": "url",
            "id": "button_link3",
            "label": "Column-3 Button Link"
        },
        {
          "type": "checkbox",
          "id": "blog_show_collection",
          "label": "Enable Product",
          "default": false
        },
        {
            "type": "text",
            "id": "collection-title",
            "label": "Collection Title"
        },
        {
          "type": "url",
          "id": "button_link5",
          "label": "Collection Button Link"
        },
        {
        "id": "product",
        "type": "product",
        "label": "Select Your Product"
      },
        {
          "type": "image_picker",
          "id": "image1",
          "label": "Banner Image 1",
          "info": "Size: 600px X 150px"          
        },
        {
          "type": "url",
          "id": "bannerlink1",
          "label": "link",
          "info": "Optional"
         },
        {
          "type": "image_picker",
          "id": "image2",
          "label": "Banner Image 2",
          "info": "Size: 600px X 150px"          
        },
        {
          "type": "url", 
          "id": "bannerlink2",
          "label": "link",
          "info": "Optional"
        }
      ]
    }
    ],
    "presets": [
      {
        "name": "Ishi Megamenu",
        "category": "ishi themes",
        "blocks": [
        ]
      }
    ]
  
  }
{% endschema %} 




